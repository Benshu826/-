 # OLED显示设计文档

## 项目概述
基于STM32F103C8T6的智能桌面时钟项目，支持简易模式和多功能模式两种显示模式。

## OLED显示屏规格
- 分辨率：128×64像素
- 显示区域：8行×21列字符（小字体）
- 大字体：4行×8列字符

## 显示模式设计

### 1. 简易模式 (Simple Mode)
**适用场景：** 休眠状态、时钟显示
**触发条件：** 系统休眠模式、震动检测后自动切换

```
┌─────────────────────────────────────┐
│   ┌─────────────────────────────┐   │
│   │           12:34:56          │   │ ← 大字体时间显示
│   └─────────────────────────────┘   │
│                                     │
│             2025-07-26              │ ← 日期显示
│                                     │
│               SUZHOU                │ ← 城市显示
│                                     │
│                                0/1  │ ← OTA状态
└─────────────────────────────────────┘
```

**显示内容说明：**
- **第1-2行：** 大字体时间显示 (HH:MM:SS)
- **第4行：** 日期显示 (YYYY-MM-DD)
- **第6行：** 城市名称 (SUZHOU/NANJING)
- **第7行：** OTA状态 (0/1)

**特点：**
- 简洁清晰的时间显示
- 大字体便于远距离查看
- 显示基本信息：时间、日期、城市、OTA状态

### 2. 多功能模式 (Multi-Function Mode)
**适用场景：** 激活状态、传感器数据监控
**触发条件：** 震动唤醒、按键切换

```
┌─────────────────────────────────────┐
│                                     │
│  Smart Desk Clock                   │ ← 标题
│                                     │
│  Time: 12:34:56                     │ ← 实时时间
│                                     │
│  Temp: 25.6C                        │ ← 温度数据
│                                     │
│  Humi: 65.3%                        │ ← 湿度数据
│                                     │
│  ACC: 12345                         │ ← 加速度数据
│                                     │
│  OTA: 0/1                           │ ← OTA状态
│                                     │
└─────────────────────────────────────┘
```

**显示内容说明：**
- **第1行：** 系统标题 "Smart Desk Clock"
- **第2行：** 实时时间显示 (Time: HH:MM:SS)
- **第3行：** 温度数据 (Temp: XX.XC)
- **第4行：** 湿度数据 (Humi: XX.X%)
- **第5行：** 加速度数据 (ACC: XXXXX)
- **第6行：** OTA状态 (OTA: 0/1)

**特点：**
- 信息丰富，适合监控状态
- 实时传感器数据显示
- 便于调试和状态监控

## 模式切换机制

### 自动切换
1. **震动唤醒：** 休眠模式 → 多功能模式
2. **自动休眠：** 多功能模式 → 休眠模式（10秒无操作）

### 手动切换
- **按键控制：** 通过按键手动切换模式
- **城市切换：** 支持苏州/南京城市切换

## 显示更新机制

### 简易模式更新
- **频率：** 每秒更新一次
- **内容：** 完整重新显示所有内容
- **特点：** 大字体时间显示，适合时钟用途

### 多功能模式更新
- **频率：** 每秒更新时间，传感器数据独立更新
- **内容：** 分项更新，避免闪烁
- **特点：** 实时传感器数据，适合监控用途

## 技术实现特点

### 异步显示系统
- 使用FreeRTOS队列进行消息传递
- OLED任务独立处理显示更新
- 避免显示冲突和闪烁

### 传感器集成
- **DHT11：** 温湿度传感器
- **MPU6050：** 加速度计和陀螺仪
- **震动检测：** 基于加速度变化

### 数据存储
- **AT24C02：** EEPROM存储OTA标志
- **实时时钟：** 系统时间维护

## 用户体验设计

### 简易模式优势
- 大字体显示，适合远距离查看
- 简洁界面，专注时间显示
- 低功耗，适合长期显示

### 多功能模式优势
- 信息丰富，适合监控和调试
- 实时传感器数据
- 便于系统状态监控

### 智能切换
- 震动唤醒，无需按键操作
- 自动休眠，节省功耗
- 无缝模式切换体验